define(function(require){require("common"),require("/static/component/logic/common/userinfo.js");var a={loadDom:function(){var a="",c=GC.course.id;$.ajax({url:"//wiki.imooc.com/index/getwiki",data:{course_id:c},type:"GET",dataType:"json",success:function(c){if(1==c.result){$("#wikiOn").show();var h=c.data;$.each(h,function(c,h){a+='<a href="'+h.link+'" target="_blank" class="wiki-item"><div class="wiki-list"><img src="'+h.pic+'" /><div class="wiki-content"><h3>'+h.name+'</h3><div class="wiki-list-desc">'+h.content+"</div></div></div></a>"}),$("#wiki_wrap").html(a)}else $("#wikiOn").hide(),$("#wiki_wrap").append('<div class="no-data"><i class="imv2-error_c"></i>该课程暂无相关wiki</div>')}})}};a.loadDom(),$.ajax({type:"GET",url:"/course/AjaxCourseMembers",data:{ids:GC.course.id},dataType:"json",success:function(a){if(0==a.result){var c=a.data[0];$(".js-learn-num").text(c.numbers)}}}),$.ajax({type:"GET",url:"/course/ajaxcourselearn",data:{cid:GC.course.id},dataType:"json",success:function(a){0==a.result?1==a.data?$(".js-follow-action").attr({"data-cid":GC.course.id,"data-cmd":"cancle",title:"取消收藏"}).find("i").addClass("icon-star2"):$(".js-follow-action").attr({"data-cid":GC.course.id,"data-cmd":"follow",title:"收藏"}).find("i").addClass("icon-star_outline"):-11==a.result&&$(".js-follow-action").attr({"data-cid":GC.course.id,"data-cmd":"follow",title:"收藏"}).find("i").addClass("icon-star_outline")}});var c=new Array,h={getData:function(a,c){var h=this;$(a).each(function(v){$.ajax({type:"GET",url:"/course/"+a[v],data:{cid:GC.course.id},dataType:"json",success:function(a){if(0==a.result){var y=a.data;if(y.length)switch(c[v]){case"attentionrecom":h.attentionrecom(y,".js-tag-box");break;case"courserecom":h.courserecom(y,".js-commend-box","推荐课程");break;case"courserelate":h.courserecom(y,".js-related-box","相关课程")}}}})})},selectStyle:function(){var a=["style1","style2","style3","style4","style5","style6"],c=function(a){return index=parseInt(Math.floor(Math.random()*a.length))},h=a[c(a)],v={color:h};return v},changeStyle:function(){var a=this;c.push(a.selectStyle());var h=c.length;if(h>4&&(c.shift(),h=c.length),h>1){var v=parseInt(h-1);$.each(c,function(i){return i!=v&&c[v].color==c[i].color?(c.pop(),a.changeStyle()):void 0})}},attentionrecom:function(a,h){var v=this,y="";y+='<div class="mb40 all-attention-box">                        <h4>热门专题标签</h4>                            <div class="js-all-attention all-attention">',$(a).each(function(i){"undefined"!=typeof a[i].title&&(v.changeStyle(),y+='<a href="'+a[i].url+'" target="_blank" data-id="'+a[i].subject_id+'" class="'+c[c.length-1].color+'">'+a[i].title+"</a>")}),$(h).prepend(y)},courseCartColor:function(a){var c,h={blueArr:["CSS3","jquery","sassless","python","mysql","大数据","cloudcomputing","photoshop"],orangeArr:["html","html5","webapp","fetool"],greenArr:["nodejs","vuejs","C","C#","android","mongodb","test"],cyanArr:["bootstrap","Reactjs","C puls puls","Go","ios","Unity 3D","Cocos2d-x","maya"],purpleArr:["javascript","php","linux","premiere","ZBrush"],redArr:["angularjs","java","ruby","Oracle","SQL Server"]};return $.each(h,function(v){$.each(h[v],function(y){a==h[v][y]&&(c=v)})}),"blueArr"==c?"blue":"orangeArr"==c?"orange":"greenArr"==c?"green":"cyanArr"==c?"cyan":"purpleArr"==c?"purple":"redArr"==c?"red":"red"},courserecom:function(a,c,h){var v="";v+='<div class="mb40 recom-course-list-box">                        <h4>'+h+'</h4>                        <ul class="js-recom-course moco-aside-course clearfix">',$(a).each(function(i){var c=a[i];v+="<li>";var h='<div class="aside-course-img">';h+="undefined"!=typeof c.pic&&null!=c.pic?'<img src="'+c.pic+'">':'<img src="//www.imooc.com/courseimg/s/cover015_s.jpg">',v+=h,"实战"==c.course_type?v+='<p class="aside-course-type">'+c.course_type+"</p>":"路径"==c.course_type&&(v+='<p class="aside-course-type">就业班</p>'),v+="</div>",v+='<div class="aside-course-content">';var y='<a href="//www.imooc.com/learn/'+c.id+'" class="aside-course-name" target="_blank">';"实战"==c.course_type?y='<a href="//coding.imooc.com/class/'+c.id+'.html" class="aside-course-name" target="_blank">':"路径"==c.course_type&&(y='<a href="//class.imooc.com/sc/'+c.id+'" class="aside-course-name" target="_blank">'),y+=c.name+"</a>",v+=y,c.show_price_info&&(v+='<p class="aside-course-price">',v+=1==c.show_price_info.is_show_discount_price||2==c.show_price_info.discount_type?'<span class="aside-discount-price">￥'+c.show_price_info.discount_price+"</span>":"<span>￥"+c.show_price_info.price+"</span>",c.show_price_info.discount_type&&2==c.show_price_info.discount_type&&(v+='<span class="aside-discount-intro">学生惠</span>'),v+="</p>",v+='<div class="aside-course-dot">',v+='<i class="imv2-dot_samll"></i>',v+="</div>"),"路径"==c.course_type&&(v+='<p class="aside-course-grade">',v+=c.step+"步骤/"+c.coursecount+"门课",v+="</p>",v+='<div class="aside-course-dot">',v+='<i class="imv2-dot_samll"></i>',v+="</div>"),c.easy_type&&(v+='<p class="aside-course-grade">',v+=c.easy_type,v+="</p>",v+='<div class="aside-course-dot">',v+='<i class="imv2-dot_samll"></i>',v+="</div>"),v+='<p class="aside-course-people">',v+='<i class="imv2-set-sns"></i>',v+="<span>"+c.numbers+"</span>",v+="</p>",v+="</div>",v+="</li>"}),v+="</ul></div>",$(c).append(v)}};h.getData(["ajaxskillcourse","ajaxcoursenewrecom","ajaxcourserelate"],["attentionrecom","courserecom","courserelate"])});