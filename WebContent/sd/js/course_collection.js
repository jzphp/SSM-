define(function(require){require("/static/lib/layer/1.6.0/layer.min.js"),require("/static/lib/layer/1.6.0/skin/layer.css");var a=0;$(document).delegate(".js-follow-action","click",function(){function y(){require.async("login_sns",function(a){a.init()})}if(!OP_CONFIG.userInfo)return void y();if(!a){a=1;var v=$(this),C=v.data("cid"),O=(v.data("cmd"),v.data("prompt"));$.ajax({type:"POST",url:"/u/"+OP_CONFIG.userInfo.uid+"/course/"+C,dataType:"json",success:function(a){0==a.result?"cancle"==v.data("cmd")?(v.data("cmd","follow").attr("title","收藏").find("i").removeClass("icon-star2").addClass("icon-star_outline"),c(O,"取消收藏成功")):(v.removeClass("icon-star_outline").data("cmd","cancle").attr("title","取消收藏").find("i").addClass("icon-star2"),c(O,"收藏成功")):layer.msg("操作失败，请稍后再试",1,1)},error:function(){layer.msg("网络错误，请稍后再试",1,1)},complete:function(){a=0}})}});var c=function(a,c){a?$.prompt(c):$.tipAlert($(".follow-action"),{info:c})}});